import streamlit as st

# í˜ì´ì§€ ì„¤ì •
st.set_page_config(page_title="ì•½ ì¶”ì²œ AI", page_icon="ğŸ’Š")

st.title("ğŸ’Š ì¦ìƒ ê¸°ë°˜ ì•½ ì¶”ì²œ AI")

# ìƒíƒœ ì €ì¥ (ì…ë ¥ ì „/í›„ í™”ë©´ ì „í™˜)
if "ë‹¨ê³„" not in st.session_state:
    st.session_state["ë‹¨ê³„"] = "ì…ë ¥í™”ë©´"

# ì•½ ë°ì´í„°
ì¦ìƒ_ë°ì´í„° = {
    "ë‘í†µ": {
        "í‚¤ì›Œë“œ": ["ë¨¸ë¦¬", "ë‘í†µ"],
        "ì•½": "íƒ€ì´ë ˆë†€",
        "ì´ë¯¸ì§€": "https://sdmntpreastus.oaiusercontent.com/files/00000000-fb8c-61f9-84bd-6febd5f08841/raw?se=2025-07-31T13%3A11%3A46Z&sp=r&sv=2024-08-04&sr=b&scid=a0a35075-7f24-5138-bed0-85d541973d4e&skoid=5c72dd08-68ae-4091-b4e1-40ccec0693ae&sktid=a48cca56-e6da-484e-a814-9c849652bcb3&skt=2025-07-30T22%3A14%3A57Z&ske=2025-07-31T22%3A14%3A57Z&sks=b&skv=2024-08-04&sig=KEtXLBDVWtaxmE9My2ceQAdhp9JyJoJ/qgE3xfVjQrI%3D"
    },
    "ê¸°ì¹¨": {
        "í‚¤ì›Œë“œ": ["ê¸°ì¹¨", "ê¸°ì¹¨ì´", "ê¸°ì¹¨ë‚˜ìš”"],
        "ì•½": "ì½”í‘¸ìŠ¤íƒ‘",
        "ì´ë¯¸ì§€": "https://sdmntprwestus3.oaiusercontent.com/files/00000000-e874-61fd-951a-ec9275ce9ed6/raw?se=2025-07-31T14%3A10%3A18Z&sp=r&sv=2024-08-04&sr=b&scid=b7a308b5-39c5-5de0-9529-7597e9e1232c&skoid=c953efd6-2ae8-41b4-a6d6-34b1475ac07c&sktid=a48cca56-e6da-484e-a814-9c849652bcb3&skt=2025-07-30T22%3A38%3A30Z&ske=2025-07-31T22%3A38%3A30Z&sks=b&skv=2024-08-04&sig=xPpMPYqfOQZHoDVZ0HXh3/xg9QKTytvzYNLii728oy0%3D"
    },
    "ì½§ë¬¼": {
        "í‚¤ì›Œë“œ": ["ì½§ë¬¼", "ì½”", "ì½”ê°€", "ì½”ë§‰í˜"],
        "ì•½": "ì•ŒëŸ¬ìƒ·",
        "ì´ë¯¸ì§€": "https://github.com/Chohw10/medicine-ai/blob/main/%EC%95%8C%EB%9F%AC%EC%83%B7.png?raw=true"
    },
    "ì—´": {
        "í‚¤ì›Œë“œ": ["ì—´", "ì—´ë‚˜ìš”", "ì—´ì´"],
        "ì•½": "íƒ€ì„¸ë†€",
        "ì´ë¯¸ì§€": "https://sdmntpritalynorth.oaiusercontent.com/files/00000000-2484-6246-b6cc-179b6d224b84/raw?se=2025-07-31T13%3A43%3A15Z&sp=r&sv=2024-08-04&sr=b&scid=860ccaf0-8088-5fe4-9f3e-d8e4e95379b9&skoid=5c72dd08-68ae-4091-b4e1-40ccec0693ae&sktid=a48cca56-e6da-484e-a814-9c849652bcb3&skt=2025-07-30T22%3A16%3A34Z&ske=2025-07-31T22%3A16%3A34Z&sks=b&skv=2024-08-04&sig=IVrWDShdk8TXdARzMyEEti24AkPsQ44vT1nhzKepZJE%3D"
    },
    "ë³µí†µ": {
        "í‚¤ì›Œë“œ": ["ë°°", "ë³µí†µ", "ì†ì´"],
        "ì•½": "ë¶€ìŠ¤ì½”íŒ",
        "ì´ë¯¸ì§€": "https://sdmntprwestus3.oaiusercontent.com/files/00000000-b6f4-61fd-8694-e4fc16e1aecd/raw?se=2025-07-31T13%3A59%3A41Z&sp=r&sv=2024-08-04&sr=b&scid=945606ef-257f-5a29-8824-a0d42d03266b&skoid=c953efd6-2ae8-41b4-a6d6-34b1475ac07c&sktid=a48cca56-e6da-484e-a814-9c849652bcb3&skt=2025-07-30T22%3A38%3A30Z&ske=2025-07-31T22%3A38%3A30Z&sks=b&skv=2024-08-04&sig=GzirWX2B3obQk6fsJhbNvxK5ssO5KpCFimgGzMBlyH0%3D"
    }
}

# ë‹¨ê³„ë³„ í™”ë©´ ì²˜ë¦¬
if st.session_state["ë‹¨ê³„"] == "ì…ë ¥í™”ë©´":
    ì…ë ¥ = st.text_input("ì–´ë””ê°€ ì•„í”„ì„¸ìš”? (ì˜ˆ: ë¨¸ë¦¬ê°€ ì•„íŒŒìš”)")

    if ì…ë ¥:
        ì¶”ì²œ_ì•½ = None
        ì¶”ì²œ_ì´ë¯¸ì§€ = None

        for ì¦ìƒ in ì¦ìƒ_ë°ì´í„°:
            í‚¤ì›Œë“œë“¤ = ì¦ìƒ_ë°ì´í„°[ì¦ìƒ]["í‚¤ì›Œë“œ"]
            for í‚¤ì›Œë“œ in í‚¤ì›Œë“œë“¤:
                if í‚¤ì›Œë“œ in ì…ë ¥:
                    ì¶”ì²œ_ì•½ = ì¦ìƒ_ë°ì´í„°[ì¦ìƒ]["ì•½"]
                    ì¶”ì²œ_ì´ë¯¸ì§€ = ì¦ìƒ_ë°ì´í„°[ì¦ìƒ]["ì´ë¯¸ì§€"]
                    break
            if ì¶”ì²œ_ì•½:
                break

        if ì¶”ì²œ_ì•½:
            st.session_state["ì¶”ì²œ_ì•½"] = ì¶”ì²œ_ì•½
            st.session_state["ì¶”ì²œ_ì´ë¯¸ì§€"] = ì¶”ì²œ_ì´ë¯¸ì§€
            st.session_state["ë‹¨ê³„"] = "ê²°ê³¼í™”ë©´"
            st.rerun()
        else:
            st.error("ğŸ˜¢ ì£„ì†¡í•´ìš”, ê·¸ ì¦ìƒì— ëŒ€í•œ ì •ë³´ê°€ ì•„ì§ ì—†ì–´ìš”.")

elif st.session_state["ë‹¨ê³„"] == "ê²°ê³¼í™”ë©´":
    st.success(f"ğŸ’Š ì¶”ì²œ ì•½: {st.session_state['ì¶”ì²œ_ì•½']}")
    st.image(st.session_state["ì¶”ì²œ_ì´ë¯¸ì§€"], width=300)

     # ì•½ ì„¤ëª… ìë™ ì¶œë ¥
    ì•½ì„¤ëª… = ""
    if "íƒ€ì´ë ˆë†€" in st.session_state["ì¶”ì²œ_ì•½"]:
        ì•½ì„¤ëª… = "ğŸ’¡ íƒ€ì´ë ˆë†€ì€ ë‘í†µ, ì¹˜í†µ, ê·¼ìœ¡í†µ, ê°ê¸° ì¦ìƒ ë“±ì˜ ì™„í™”ì— ì‚¬ìš©ë˜ëŠ” í•´ì—´ì§„í†µì œì…ë‹ˆë‹¤. ë§Œ 12ì„¸ ì´ìƒ ì†Œì•„ ë° ì„±ì¸ ê¸°ì¤€ ìµœëŒ€ 1íšŒì— 2ì •ì”© 1ì¼ 4íšŒ(4-6ì‹œê°„ë§ˆë‹¤) ë³µìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."
    if "ì½”í‘¸ìŠ¤íƒ‘" in st.session_state["ì¶”ì²œ_ì•½"]:
        ì•½ì„¤ëª… = "ğŸ’¡ ì½”í‘¸ìŠ¤íƒ‘ì€ ê¸°ì¹¨Â·ê°€ë˜ì— ì‚¬ìš©ë˜ëŠ” ë³µí•© ì§„í•´Â·ê±°ë‹´ì œì…ë‹ˆë‹¤. ì„±ì¸ ê¸°ì¤€  1íšŒ 1ìº¡ìŠì”© 1ì¼ 3íšŒ ì‹í›„ì— ë³µìš©í•´ì•¼ í•©ë‹ˆë‹¤."
    if "ì•ŒëŸ¬ìƒ·" in st.session_state["ì¶”ì²œ_ì•½"]:
        ì•½ì„¤ëª… = "ğŸ’¡ ì•ŒëŸ¬ìƒ·ì€ ì½”ë§‰í˜, ì½§ë¬¼, ì¬ì±„ê¸° ê°™ì€ ì•Œë ˆë¥´ê¸° ë¹„ì—¼ ì¦ìƒì„ ì™„í™”í•´ì£¼ëŠ” ì•½ì…ë‹ˆë‹¤. ì„±ì¸ ë° 12ì„¸ ì´ìƒ ì†Œì•„ ê¸°ì¤€ 1ì¼ 1íšŒ, 1ì • ë³µìš©í•©ë‹ˆë‹¤."
    if "íƒ€ì„¸ë†€" in st.session_state["ì¶”ì²œ_ì•½"]:
        ì•½ì„¤ëª… = "ğŸ’¡ íƒ€ì„¸ë†€ì€ ì—´ì„ ë‚´ë¦¬ê³  í†µì¦ì„ ì™„í™”í•˜ëŠ” í•´ì—´ì§„í†µì œì…ë‹ˆë‹¤. ì„±ì¸ (ë§Œ 12ì„¸ ì´ìƒ) ê¸°ì¤€ 1íšŒ 1~2ì •ì”© 1ì¼ 3-4íšŒ (4-6ì‹œê°„ ë§ˆë‹¤) í•„ìš”ì‹œ ë³µìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."
    if "ë¶€ìŠ¤ì½”íŒ" in st.session_state["ì¶”ì²œ_ì•½"]:
        ì•½ì„¤ëª… = "ğŸ’¡ ë¶€ìŠ¤ì½”íŒì€ ì¥ì´ë‚˜ ìœ„ì˜ ê²½ë ¨ì„ ì™„í™”í•´ ë³µí†µì„ ì¤„ì—¬ì£¼ëŠ” ì•½ì…ë‹ˆë‹¤. ì„±ì¸ ë° 12ì„¸ ì´ìƒ ì†Œì•„ ê¸°ì¤€ 1íšŒ 1-2ì •ì”© 1ì¼ 3íšŒ, ìµœëŒ€ 6ì • ë³µìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."

    if ì•½ì„¤ëª…:
        st.info(ì•½ì„¤ëª…)
        
    # ì™¼ìª½ ì•„ë˜ì— "ì´ì „" ë²„íŠ¼
    with st.sidebar:
        if st.button("â¬… ì´ì „ìœ¼ë¡œ ëŒì•„ê°€ê¸°"):
            st.session_state["ë‹¨ê³„"] = "ì…ë ¥í™”ë©´"
            st.rerun()

